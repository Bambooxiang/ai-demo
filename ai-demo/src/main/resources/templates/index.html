<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>My Ai Demo</title>
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
</head>
<body>
<h1> Hello My Ai Demo !</h1>
<div id="app">
    <h1> Nlp纠错 </h1>
    <el-input
            placeholder="请输入内容"
            v-model="nlp_input"
            clearable>
    </el-input>
    <el-input
            type="textarea"
            :rows="2"
            placeholder="识别结果"
            v-model="nlp_output">
    </el-input>
    <el-button type="primary" @click="nlp_correction">纠错</el-button>

    <h1> 图像识别 </h1>
    <el-upload
            class="upload-demo"
            drag
            action="http://127.0.0.1:8080/img"
            :on-success="img_uploadFile"
            multiple>
        <i class="el-icon-upload"></i>
        <div class="el-upload__text">将文件拖到此处，或<em>点击上传</em></div>
        <div class="el-upload__tip" slot="tip">只能上传jpg/png文件，且不超过500kb</div>
    </el-upload>
    <el-input
            type="textarea"
            :rows="2"
            placeholder="识别结果"
            v-model="img_output">
    </el-input>

    <h1> 文字识别 </h1>
    <el-upload
            class="upload-demo"
            drag
            action="http://127.0.0.1:8080/word"
            :on-success="word_uploadFile"
            multiple>
        <i class="el-icon-upload"></i>
        <div class="el-upload__text">将文件拖到此处，或<em>点击上传</em></div>
        <div class="el-upload__tip" slot="tip">只能上传jpg/png文件，且不超过500kb</div>
    </el-upload>
    <el-input
            type="textarea"
            :rows="2"
            placeholder="识别结果"
            v-model="word_output">
    </el-input>

    <h1> 内容表格 </h1>
    <el-button type="primary" @click="get_content">查询</el-button>
    <el-table
            :data="contentList"
            style="width: 100%">
        <el-table-column
                prop="id"
                label="主键"
                width="180">
        </el-table-column>
        <el-table-column
                prop="content"
                label="内容"
                width="180">
        </el-table-column>
        <el-table-column
                prop="type"
                label="类型"
                width="300">
        </el-table-column>
        <el-table-column
                prop="createTime"
                label="创建时间"
                width="300">
        </el-table-column>
        <el-table-column
                prop="modifyTime"
                label="修改时间"
                width="300">
        </el-table-column>
        <template slot-scope="scope">
            <el-button
                    size="mini"
                    type="danger"
                    @click="handleDelete(scope.$index, scope.row)">删除</el-button>
        </template>
    </el-table>
</div>
</body>
<script src="https://cdn.bootcss.com/vue/2.5.16/vue.min.js"></script>
<!-- import JavaScript -->
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
    new Vue({
        el: '#app',
        data: {
            "nlp_input":"",
            "nlp_output":"",
            "img_output":"",
            "word_output":"",
            "contentList":""
        },
        methods: {
            get_content(){
                axios.get("http://127.0.0.1:8080/getAllContent",{
                }).then(res=>{
                    this.contentList = res.data;
                    console.log(res.data);
                })
            },
            handleDelete(index, row) {
                axios.delete("http://127.0.0.1:8080/deleteContent",{
                    params:{
                        id:row.id
                    }
                }).then(res=>{
                    console.log(res.data);
                    this.get_content();
                })
            },
            nlp_correction(){
                axios.get("http://127.0.0.1:8080/nlp",{
                    params:{
                        text:this.nlp_input
                    }
                }).then(res=>{
                    this.nlp_output = res.data;
                    console.log(res.data);
                })
            },
            img_uploadFile(res, file){
                console.log(res);
                this.img_output = res;
            },
            word_uploadFile(res, file){
                console.log(res);
                this.word_output = res;
            }

        },
    })
</script>
</html>